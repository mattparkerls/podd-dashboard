<div class="comments-wrapper" ng-controller="CommentsCtrl">
  <h3 class="comment-title"><i class="fa fa-comments"></i> ความคิดเห็น</h3>
  <div class="comment-form clearfix">
    <form role="form" ng-submit="comment();">

      <div clas="form-group">

        <mentio-menu
          mentio-for="'message'"
          mentio-trigger-char="'@'"
          mentio-items="users"
          mentio-template-url="/user-mentions.tpl"
          mentio-search="searchUser(term)"
          mentio-select="getUserTextRaw(item)"></mentio-menu>

        <textarea mentio
          mentio-trigger-char="'@'"
          class="editor form-control"
          ng-trim="false"
          rows="6"
          mentio-id="'message'"
          id="message"
          ng-model="message"
          required
          placeholder="Your comment here"></textarea>

      </div>

      <button type="submit" class="btn btn-default pull-right btn-post"
              ng-disabled="!message || submitting">Comment</button>
    </form>
  </div>

  <div class="comment-list">
    <ul class="list-unstyled">
      <li class="comment-item"
          blink="comment.isNew"
          ng-repeat="comment in comments | orderBy:'-createdAt' ">
        <p class="comment-post" ng-bind-html="comment.message | htmlToPlainText | renderMention"></p>

        <div class="comment-meta">
            <span class="">เมื่อ <span am-time-ago="comment.createdAt"></span></span>
            <span class="">โดย {{ comment.createdBy }}</span>
        </div>
      </li>
    </ul>
  </div>

  <script type="text/ng-template" id="/user-mentions.tpl">
      <ul class="list-group user-search">
          <li mentio-menu-item="user" ng-repeat="user in items" class="list-group-item">
              <span class="text-primary" ng-bind-html="user.username | mentioHighlight:typedTerm:'menu-highlighted' | unsafe"></span>
              <em class="text-muted" ng-bind="user.fullName"></em>
          </li>
      </ul>
  </script>

</div>
